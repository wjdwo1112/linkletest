<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ggamakun.linkle.domain.category.repository.ICategoryRepository">

    <!-- 모든 카테고리 조회 -->
    <select id="findAll" resultType="com.ggamakun.linkle.domain.category.entity.Category">
        SELECT 
            category_id as categoryId,
            parent_category_id as parentCategoryId,
            name,
            created_by as createdBy,
            created_at as createdAt,
            updated_by as updatedBy,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM Category
        WHERE is_deleted = 'N'
        ORDER BY category_id
    </select>

    <!-- 1차 카테고리 조회 -->
    <select id="findParentCategories" resultType="com.ggamakun.linkle.domain.category.entity.Category">
        SELECT 
            category_id as categoryId,
            parent_category_id as parentCategoryId,
            name,
            created_by as createdBy,
            created_at as createdAt,
            updated_by as updatedBy,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM Category
        WHERE parent_category_id IS NULL
        AND is_deleted = 'N'
        ORDER BY category_id
    </select>

    <!-- 특정 부모의 하위 카테고리 조회 -->
    <select id="findChildCategories" parameterType="int" resultType="com.ggamakun.linkle.domain.category.entity.Category">
        SELECT 
            category_id as categoryId,
            parent_category_id as parentCategoryId,
            name,
            created_by as createdBy,
            created_at as createdAt,
            updated_by as updatedBy,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM Category
        WHERE parent_category_id = #{parentCategoryId}
        AND is_deleted = 'N'
        ORDER BY category_id
    </select>

    <!-- 카테고리 ID로 조회 -->
    <select id="findById" parameterType="int" resultType="com.ggamakun.linkle.domain.category.entity.Category">
        SELECT 
            category_id as categoryId,
            parent_category_id as parentCategoryId,
            name,
            created_by as createdBy,
            created_at as createdAt,
            updated_by as updatedBy,
            updated_at as updatedAt,
            is_deleted as isDeleted
        FROM Category
        WHERE category_id = #{categoryId}
        AND is_deleted = 'N'
    </select>

</mapper>